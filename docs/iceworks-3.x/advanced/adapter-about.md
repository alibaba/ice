---
title: Adapter 是什么
order: 1
---

## 背景

在 iceworks 3.0 的产品设计初期，我们对 iceworks 的定位是一个 **开箱即用的 「项目」和 「工程」可视化管理工作台**，通过对 ICE 工程体系进行抽象，对项目进行可视化的展示和操作，帮助开发者屏蔽复杂的工程体系。在技术实现上，我们对功能模块进行了抽象，规范了每个功能模块的接口，只需要实现 ICE 体系的最佳实践方案即可。但实际上并不是这样，一些问题开始浮现：

*  功能约定越来越多，接口(interface) 设计也开始暴增，达到 700 多行。详尽地罗列 APIs 后，我们发现这不利于实现，以及阅读和理解。
* 如何更好的支持除 ICE 体系外其他的最佳实践和工程体系的接入，显然我们不能要求其他开发者一定要按照 ICE 的最佳实践去做妥协，去实现所有的功能接口。
* 在实现具体的功能模块时，我们发现功能模块之间并没有相互关联而且彼此是相互独立的，比如某个最佳实践并没有 「菜单」或者是「路由」的约定，可以只实现一部分的功能或提供扩展的能力。

基于上述考虑，我们开始思考如何约定接口和组织功能模块，让 iceworks 可以动态去适配不同的项目最佳实践和工程体系，达到定制 iceworks 工作台的能力。最终我们产出了 Adapter 机制。

## Adapter 是什么

我们对 Adapter 的定义如下：

> iceworks 本质上是某一类型前端项目的最佳实践和工程的抽象，Adapter 即是这个抽象的具体实现，通过不同的 Adapter 可以接入不同种类的最佳实践和工程，定制专有的前端工作台。

Adapter 核心包括两部分功能：

* 工程实践：即使用的构建调试工具，比如 ice-scripts、vue-cli 等，决定了项目启动构建以及工程配置等能力。
* 项目实践：即项目开发的最佳实践，包含目录结构、路由配置、权限管理等，决定了面板里新建页面、路由管理等方案。

![iceworks-adapter-design](https://img.alicdn.com/tfs/TB1wwsmcAxz61VjSZFrXXXeLFXa-2384-1404.png)


## Adapter 职责

Adapter 的职责则是根据 iceworks 定义的接口(interface)具体实现相关功能，主要包括以下两部分：

* 项目管理：包括路由，菜单，Mock，数据流等最佳实践，通过接口定义每个功能模块的具体行为，比如新增路由，删除路由，修改路由，展示路由列表等等信息。
* 工程管理：包括启动调试服务，构建项目，工程配置等最佳实践，其背后对应的是某个具体工程，比如 ICE 体系的 ice-scripts 工程，通过对工程进行抽象，进行可视化管理操作。
